{% extends "base.html" %}

{% block content %}
<section class="new-order">
  <h2>Create & Pay Order</h2>
  <form method="post" action="{{ url_for('create_order_route') }}">
    <label>
      Customer name:
      <input type="text" name="user" placeholder="nana">
    </label>
    <label>
      Item:
      <input type="text" name="item" value="mushroom pizza">
    </label>
    <label>
      Quantity:
      <input type="number" name="quantity" value="1" min="1">
    </label>
    <label>
      Amount (AUD):
      <input type="number" step="0.01" name="amount" value="19.99">
    </label>
    <button type="submit">Pay & Send to Kafka</button>
  </form>
</section>

<section class="orders">
  <h2>Orders</h2>
  {% if orders %}
    <table>
      <thead>
        <tr>
          <th>Order ID</th>
          <th>Customer</th>
          <th>Item</th>
          <th>Qty</th>
          <th>Amount</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {% for o in orders %}
          <tr>
            <td>{{ o["order_id"] }}</td>
            <td>{{ o["user"] }}</td>
            <td>{{ o["item"] }}</td>
            <td>{{ o["quantity"] }}</td>
            <td>{{ "%.2f"|format(o["amount"] or 0) }}</td>
            <td>{{ o["status"] }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No orders yet. Create one above.</p>
  {% endif %}
</section>
{% endblock %}
